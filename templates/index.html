{% extends "base.html" %}

{% block mytitle %}Home - VoxWave{% endblock %}

{% block mycss %}
<style>
  body {
    -webkit-user-select: none; /* Chrome, Safari, Opera */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* IE 10+ */
    user-select: none; /* Standard syntax */
}
    /* Media query for screens smaller than 600px */
    @media (max-width: 767px) {
      /* Custom CSS rules for screens smaller than 600px */
      /* Adjust styles for smaller screens here */
      .navigation {
        position: fixed;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: auto;
        background-color: #f5f5f5;
      }
      .mobile-only{
        display: block;
      }
      .desktop-only {
        display: none; /* Hide the element by default */
    }
    .feed-card {
      max-width: 90%;
      position: relative; /* Required for positioning elements within */
      margin-top: 20px;
      background-color: white;
      margin-left: 10px;
    }
    .caption{
      font-size:25px;
    }
    .feed-card img {
      width: 100%; /* Ensures image fills the card width */
      height: auto;  /* Allows image height to adjust based on aspect ratio */
      object-fit: cover;  /* Scales image to fill while maintaining aspect ratio */
    }
    .like-div{
      height: 50px; 
      max-width: 90%; 
      padding-top: 8px; 
      background-color: white;
      margin-left:10px;
    }
    
    }

    /* Media query for screens between 601px and 900px */
    @media (min-width: 768px) and (max-width: 899px){
      /* Custom CSS rules for screens between 601px and 900px */
      /* Adjust styles for medium-sized screens here */
      .navigation {
        position: fixed;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: 80px;
        background-color: #f5f5f5;
      }
      .desktop-only {
        display: block; /* Show the element on desktop view */
      }
      .mobile-only{
        display: none;
      }
      .feed-card {
        max-width: 60%;
        position: relative; /* Required for positioning elements within */
        margin-top: 20px;
        background-color: white;
        margin-left: 80px;
      }
      
      .feed-card img {
        width: 100%; /* Ensures image fills the card width */
        height: auto;  /* Allows image height to adjust based on aspect ratio */
        object-fit: cover;  /* Scales image to fill while maintaining aspect ratio */
      }
      .caption{
        font-size:30px;
      }
      .like-div{
        height: 50px; 
        max-width: 60%; 
        padding-top: 8px; 
        background-color: white;
        margin-left:80px;
      }
      .desktop-only{
        display: none;
      }
      .mobile-only{
        display: block;
      }
      .hide{
        display: none;
      }
    }

    /* Media query for screens between 601px and 900px */
    @media (min-width: 900px) and (max-width: 1199px) {
      /* Custom CSS rules for screens between 601px and 900px */
      /* Adjust styles for medium-sized screens here */
      .navigation {
        position: fixed;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: 80px;
        background-color: #f5f5f5;
      }
      .desktop-only {
        display: block; /* Show the element on desktop view */
      }
      .mobile-only{
        display: none;
      }
      .feed-card {
        max-width: 60%;
        position: relative; /* Required for positioning elements within */
        margin-top: 20px;
        background-color: white;
        margin-left: 80px;
      }
      
      .feed-card img {
        width: 100%; /* Ensures image fills the card width */
        height: auto;  /* Allows image height to adjust based on aspect ratio */
        object-fit: cover;  /* Scales image to fill while maintaining aspect ratio */
      }
      .caption{
        font-size:30px;
      }
      .like-div{
        height: 50px; 
        max-width: 60%; 
        padding-top: 8px; 
        background-color: white;
        margin-left:80px;
      }
      .desktop-only{
        display: none;
      }
      .mobile-only{
        display: block;
      }
      .hide{
        display: none;
      }
    }

    /* Media query for screens larger than 901px */
    @media screen and ((min-width: 1200px) and (max-width: 1700px)) {
      /* Custom CSS rules for screens larger than 901px */
      /* Adjust styles for larger screens here */
      .navigation {
        position: fixed;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: 80px;
        background-color: #f5f5f5;
      }
      .desktop-only {
        display: block; /* Show the element on desktop view */
      }
      .mobile-only{
        display: none;
      }
      .feed-card {
        max-width: 40%;
        position: relative; /* Required for positioning elements within */
        margin-top: 20px;
        background-color: white;
        margin-left: 80px;
      }
      
      .feed-card img {
        width: 100%; /* Ensures image fills the card width */
        height: auto;  /* Allows image height to adjust based on aspect ratio */
        object-fit: cover;  /* Scales image to fill while maintaining aspect ratio */
      }
      .caption{
        font-size:30px;
      }
      .like-div{
        height: 50px; 
        max-width: 40%; 
        padding-top: 8px; 
        background-color: white;
        margin-left:80px;
      }
      .suggestion{
        width: 40%;
        height: auto;
        top: 160px;
        right: 60px;
        z-index: 900;
      }
      .hide{
        display: none;
      }
    }
    /* Media query for screens larger than 901px */
    @media screen and (min-width: 1701px) {
      /* Custom CSS rules for screens larger than 901px */
      /* Adjust styles for larger screens here */
      .navigation {
        position: fixed;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: 80px;
        background-color: #f5f5f5;
      }
      .desktop-only {
        display: block; /* Show the element on desktop view */
      }
      .mobile-only{
        display: none;
      }
      .feed-card {
        max-width: 50%;
        position: relative; /* Required for positioning elements within */
        margin-top: 20px;
        background-color: white;
        margin-left: 100px;
      }
      
      .feed-card img {
        width: 100%; /* Ensures image fills the card width */
        height: auto;  /* Allows image height to adjust based on aspect ratio */
        object-fit: cover;  /* Scales image to fill while maintaining aspect ratio */
      }
      .caption{
        font-size:40px;
      }
      .like-div{
        height: 50px; 
        max-width: 50%; 
        padding-top: 8px; 
        background-color: white;
        margin-left:100px;
      }
      .suggestion{
        width: 30%;
        height: auto;
        top: 200px;
        right: 40px;
        z-index: 1300;
      }
    }
    
    .dropdown-menu {
        display: none;
        position: absolute;
        background-color: #fff;
        border: 1px solid #ccc;
        padding: 5px;
        margin-right: 30px;
        width: 250px; /* Adjust the width as needed */
        right: 0;
    }
    
    .dropdown-menu a {
        display: block;
        padding: 5px;
        color: #000;
        text-decoration: none;
    }
    
    .dropdown-menu a:hover {
        background-color: #f0f0f0;
    }
      
    .addBtn{
      position: fixed;
      height: 60px;
      width: 60px;
      border-radius: 50%;
      background-color: darkcyan;
      color: #fff;
      border: none;
      font-size: 1.4em;
      cursor: pointer;
      box-shadow: 5px 5px 40px #000;
      outline: none;
      bottom: 20%;
      right: 20px;
      z-index: 1900;
      transform: translate(-50%, -50%);
    }
    .dragBtn {
      position: fixed;
      height: 60px;
      width: 60px;
      border-radius: 50%;
      background-color: darkcyan;
      color: #fff;
      border: none;
      font-size: 1.4em;
      cursor: pointer;
      box-shadow: 5px 5px 40px #000;
      outline: none;
      bottom: 5%;
      right: 20px;
      z-index: 1900;
      transform: translate(-50%, -50%);
    }
</style>
{% endblock %}

{% block mybody %}
<div class="w3-container" style="padding: 0px; margin: 0px; position: relative;">
    <div class="navigation w3-container w3-white w3-card-4" style="padding-top: 15px; margin-bottom: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px;">
        <div class="w3-container w3-cell">
           <a href="/" style="text-decoration: none;"><h4 class="w3-left"><b>VoxWave</b></h4></a>
        </div>
        <div class="w3-container w3-cell" style="width: 100%;" style="padding-right: 0px; margin-right: 0px;">
            <a href="\search"><button type="submit" style="background-color: transparent; border: none; padding-top: 15px; cursor: pointer;"><i class="fa fa-search"></i></button></a>
            <div class="w3-container w3-cell w3-right" style="padding-right: 0px; margin-right: 0px;">
                <div class="dropdown">
                    <img src="{{user_profile.profileimg.url}}" class="w3-circle dropdown-toggle" style="width: 40px; height:40px; cursor: pointer;" alt="">
                    <div class="dropdown-menu w3-card-4 w3-round-large">
                        <!-- Dropdown content here -->
                        <a href="/profile/{{user.username}}">Your Profile</a>
                        <a href="/settings">Account Settings</a>
                        <a href="/logout">Logout</a>
                    </div>
                </div>
            </div>
            
              <button type="button" onclick="document.getElementById('upload').style.display='block'" class="w3-btn w3-border w3-round-large home-button w3-cell w3-right" style="background-color: transparent; color: Black; margin-left: 20px; margin-right: 10px;"> <b>Upload</b> </button>
              <div id="upload" class="w3-modal" style="z-index: 19000;">
                <div class="w3-modal-content w3-card-4 w3-animate-zoom w3-round-large" style="width: 40%; margin-left: 20px;">
                  <header class="w3-container w3-teal w3-round-large"> 
                    <span onclick="document.getElementById('upload').style.display='none'" 
                    class="w3-button w3-display-topright w3-round-xlarge" style="font-size: 25px;">&times;</span>
                    <h2 class="w3-center">Share Your Moments</h2>
                  </header>
                  <form action="upload" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                  <div class="w3-container w3-round-xlarge" style="padding-left: 30px;">
                    <p>Choose your Moments to share with others.</p>
                    <p class="w3-opacity">Only Image File can be uploaded....</p>
                    <p><b>Pic to Share:</b><br>&nbsp;&nbsp;&nbsp;<input type="file" class="image-input" name="image_upload" style="padding-right:20px;"></p>
                    <div class="w3-container">
                      <br>
                      <label class="w3-left labels" for="description"><b>Caption:</b></label>&nbsp;&nbsp;  
                      <textarea id="description" name="caption" placeholder="Caption" class="textarea-input" rows="3" style="padding-left: 10px; padding-top: 10px;"></textarea>
                    </div>
                  </div>
                  <footer class="w3-container">
                    <button type="submit" class="w3-btn w3-border w3-round-large w3-right" style="background-color: #cccccc; color: white;"> Upload </button>
                    <br><br>
                  </footer>
                </form>
                </div>
              </div>
           
            <div class="w3-container w3-cell w3-right desktop-only" style="padding-right: 5px;">
                <h5 class="w3-opacity" style="text-shadow:1px 1px 0 #444">Welcome, {{user.username}}</h5>
            </div>
            
        </div>
        
    </div>
    <div class="w3-container" style="height: auto; margin-top: 100px;">
      {% for post in posts reversed %}
        <div class="w3-card-4 w3-round-large feed-card w3-display-container" style="background-color: white; margin-top: 40px;">
          <img src="{{post.image.url}}" class="w3-round-large" alt="Feed">
          <div class="w3-display-topleft w3-container" style="padding-top: 10px; padding-left: 20px;"><b><a href="/profile/{{post.user}}" style="text-decoration: none; color: white; text-shadow:1px 1px 0 #444"><h4> @{{post.user}} </h4></a></b></div>
          <div class="w3-display-bottomleft w3-container" style="padding-bottom: 20px; padding-left: 20px;"><h3 class="caption" style="text-shadow:1px 1px 0 #444; color: white;">{{post.caption}}</h3></div>  
          </div>
          <div class="w3-container like-div" style="border-bottom-right-radius: 10px; border-bottom-left-radius: 10px;border-top-right-radius: 5px; border-top-left-radius: 5px;">
          <div class="w3-container w3-cell w3-left">
              <a href="/like-post?post_id={{post.id}}" style="text-decoration: none; cursor: pointer;">
                      <i class="fa fa-thumbs-up" aria-hidden="true" style="font-size: 30px;"></i>
              </a>    
          </div>
          <div class="w3-container w3-cell w3-right" style="padding-top: 8px;">
            <b>
            {% if post.no_of_likes == 0%}
                No Likes
            {% elif post.no_of_likes == 1 %}
                Liked by {{post.no_of_likes}} person
            {%else%}
                Liked by {{post.no_of_likes}} people
            {% endif %}
            </b>
          </div> 
        </div>
        {% endfor %}
    </div>
    <button type="button" onclick="chatPage()" class="dragBtn w3-btn"><i class="fa fa-comments" aria-hidden="true"></i></button>
    <button type="button" onclick="document.getElementById('suggestion').style.display='block'" class="addBtn mobile-only w3-btn"><i class="fa fa-address-book-o" aria-hidden="true"></i></button>

    <div id="suggestion" class="w3-modal"style="z-index: 1600;">
      <div class="w3-modal-content w3-card-4 w3-animate-zoom w3-round-large" style="width: 70%; height: auto;">
        <header class="w3-container"> 
          <span onclick="document.getElementById('suggestion').style.display='none'" 
          class="w3-button w3-display-topright w3-round-xlarge" style="font-size: 25px;">&times;</span>
          <h3 class="w3-center"><b>Users You Can Follow</b></h3>
        </header>
        {% for suggestion in suggestions_username_profile_list %}
      <div class="w3-container w3-hover-shadow w3-round-large" >
        <div class="w3-container w3-cell w3-left" style="padding-left: 20px; padding-top:20px;">
          <a href="/profile/{{suggestion.user}}">
            <img src="{{suggestion.profileimg.url}}" class="w3-circle" style="width: 40px; height:40px;">
          </a>
        </div>
        <div class="w3-container w3-cell w3-left" style="padding-left: 30px;">
          <a href="/profile/{{suggestion.user}}" style="text-decoration: none;">
          <p class="capitalize" style="font-size: 15px;">{{suggestion.user}}</p>
          <p class="capitalize" style="font-size: 15px;">{{suggestion.bio}}</p>
          </a>
        </div>
        
        <br><br>
      </div>
      {% endfor %}
      </div>
    </div>

    <div class="w3-container w3-card-4 w3-round-xlarge desktop-only suggestion" style="background-color: white; position: fixed;">
      <div class="w3-container w3-center" style="height: 80px;">
        <h2><b>Users You Can Follow</b></h2>
      </div>
      {% for suggestion in suggestions_username_profile_list %}
      <div class="w3-container w3-hover-shadow w3-round-large">
        <div class="w3-container w3-cell w3-left" style="padding-left: 20px; padding-top:20px;">
          <a href="/profile/{{suggestion.user}}">
            <img src="{{suggestion.profileimg.url}}" class="w3-circle" style="width: 50px; height:50px;">
          </a>
        </div>
        <div class="w3-container w3-cell w3-left ">
          <a href="/profile/{{suggestion.user}}" style="text-decoration: none;">
          <p class="capitalize">{{suggestion.user}}</p>
          <p class="capitalize">{{suggestion.bio}}</p>
          </a>
        </div>
        <div class="w3-container w3-cell w3-right hide" style="padding-right: 20px; padding-top:20px;">
          <a href="/profile/{{suggestion.user}}"><button type="button" class="w3-btn w3-border w3-round-large " style="background-color: transparent; color: #cccccc;"> <b>View User</b> </button></a>
        </div>
        <br><br>
      </div>
      {% endfor %}
    </div>


</div>
<br><br>
{% endblock %}
    
{% block myscript %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var dropdowns = document.querySelectorAll('.dropdown');
    
        dropdowns.forEach(function(dropdown) {
            var button = dropdown.querySelector('.dropdown-toggle');
            var menu = dropdown.querySelector('.dropdown-menu');
    
            button.addEventListener('click', function(event) {
                event.stopPropagation(); // Prevent event bubbling
    
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            });
    
            document.addEventListener('click', function(event) {
                var target = event.target;
                if (!dropdown.contains(target)) {
                    menu.style.display = 'none';
                }
            });
        });
    });


    // Get the modal
    var modal = document.getElementById('upload');

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
     // Get the modal
     var modal1 = document.getElementById('suggestion');

     // When the user clicks anywhere outside of the modal, close it
     window.onclick = function(event) {
       if (event.target == modal1) {
         modal1.style.display = "none";
       }
     }
    function chatPage() {
      // Redirect to "/settings" on click
      window.location.href = "/message_page";
    }

</script> 
{% endblock %}